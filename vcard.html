<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±åœ³æ±å¾‹ç§‘æŠ€</title>
    <style>
        :root {
            /* å…³é”®é¢œè‰²å˜é‡ */
            --glass-blur-bg: 15px; 
            --glass-blur-card: 45px;
            --glass-opacity: 0.10;
            --glass-modal-blur: 35px; 
            --glass-modal-opacity: 0.15;
            --glass-border: rgba(255, 255, 255, 0.25);
            --glass-shadow: rgba(0, 0, 0, 0.6);
            --text-color: #f0f0f5; 
            --accent-color: #0a84ff; /* æ ‡å‡† iOS è“ */
            --segment-bg: rgba(255, 255, 255, 0.15); 
        }
        
        body {
            /* ã€å­—ä½“ä¼˜åŒ–ã€‘ï¼šæ›¿æ¢ä¸ºä¸­å›½å¤§é™†ä¸»æµç³»ç»Ÿå­—ä½“æ ˆ */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
            margin: 0; min-height: 100vh; display: flex; align-items: flex-start;
            justify-content: center; color: var(--text-color); background-color: #1c1c1e; 
            position: relative; overflow-y: auto; z-index: 1; padding-bottom: 50px;
        }

        /* èƒŒæ™¯å’Œå åŠ å±‚ */
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://jony.wang/img/hailang.jpg');
            background-size: cover; background-position: center; background-repeat: no-repeat;
            filter: blur(var(--glass-blur-bg)) brightness(0.7) saturate(1.2); 
            transform: scale(1.05); opacity: 0.85; z-index: -1; 
        }
        body::after {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.6) 100%);
            z-index: -1; 
        }

        /* ä¸»å¡ç‰‡å’Œå¤´åƒæ ·å¼ */
        .vcard-container {
            max-width: 400px; width: 100%; padding-top: 50px; text-align: center;
            background-color: rgba(255, 255, 255, var(--glass-opacity));
            backdrop-filter: blur(var(--glass-blur-card)); -webkit-backdrop-filter: blur(var(--glass-blur-card));
            border-radius: 35px; border: 1px solid var(--glass-border);
            box-shadow: 0 15px 70px var(--glass-shadow);
            margin: 50px 0; overflow: hidden; position: relative; z-index: 2; 
        }
        .profile-icon {
            width: 100px; height: 100px; margin: 0 auto 12px; border-radius: 50%;
            overflow: hidden; background-color: #333; 
            border: 3px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 0 15px rgba(56, 200, 255, 0.5), inset 0 0 10px rgba(0, 0, 0, 0.5); 
        }
        #profile-image { 
            display: block; width: 100%; height: 100%; 
            object-fit: cover; 
            max-width: 100%; max-height: 100%;
        }
        .header { padding-bottom: 30px; }
        .full-name { font-size: 30px; font-weight: 660; color: var(--text-color); margin-bottom: 4px; }
        .contact-title { font-size: 16px; color: rgba(255, 255, 255, 0.7); margin: 0; }
        
        /* ä¿¡æ¯åˆ—è¡¨å’Œæ¨ªçº¿å¯¹é½ */
        .info-group {
            background-color: rgba(255, 255, 255, var(--glass-opacity)); 
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border-radius: 25px; margin: 25px 20px; overflow: hidden;
        }
        .info-list { list-style: none; padding: 0; margin: 0; text-align: left; }
        .info-item {
            display: block; padding: 0; font-size: 17px; color: var(--text-color);
            position: relative; 
        }
        .info-item:not(:last-child)::after {
            content: ''; position: absolute;
            left: 15px; /* ç²¾ç¡®å·¦å¯¹é½ */
            right: 0; bottom: 0; height: 1px;
            background-color: rgba(255, 255, 255, 0.1);
        }
        .info-item:last-child::after { content: none; }

        .info-content-wrap {
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; padding: 14px 20px; box-sizing: border-box;
        }
        .label { 
            color: rgba(255, 255, 255, 0.6); flex-shrink: 0; 
            margin-right: 20px; font-weight: 400; 
        }
        .value {
            flex-grow: 1; text-align: right; font-weight: 500; word-break: break-all;
        }
        .value a {
            color: #5ac8fa; text-decoration: none; font-weight: 500;
            transition: color 0.2s, text-decoration 0.2s;
        }
        .value a:hover {
            color: var(--accent-color); text-decoration: underline; 
        }
        
        /* Action Button Group */
        .action-container { 
            padding: 10px 20px 40px; display: flex;
            flex-direction: column; gap: 15px; 
        }
        #showModalBtn, #showVideoModalBtn {
            width: 100%; padding: 15px; background-color: var(--accent-color); 
            color: white; border: none; border-radius: 30px; 
            cursor: pointer; font-size: 17px; font-weight: 660;
            transition: all 0.2s ease-out; box-shadow: 0 4px 20px rgba(10, 132, 255, 0.5); 
        }
        #showModalBtn:active, #showVideoModalBtn:active { 
            transform: scale(0.98); box-shadow: 0 2px 5px rgba(10, 132, 255, 0.2); 
            background-color: #0077e6; 
        }
        #showVideoModalBtn {
            background-color: #ff9500; box-shadow: 0 4px 20px rgba(255, 149, 0, 0.5);
        }
        #showVideoModalBtn:active {
            background-color: #cc7a00;
        }

        /* é€šç”¨æ¨¡æ€çª—å£æ ·å¼ (Liquid Glass) */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5); 
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            display: none; align-items: center; justify-content: center; z-index: 1000;
        }
        .modal-content {
            width: 90%; max-width: 450px;
            background-color: rgba(255, 255, 255, var(--glass-modal-opacity));
            backdrop-filter: blur(var(--glass-modal-blur)); -webkit-backdrop-filter: blur(var(--glass-modal-blur));
            border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.4); 
            box-shadow: 0 10px 50px var(--glass-shadow);
            overflow: hidden; color: var(--text-color); position: relative;
        }
        .modal-header {
            padding: 20px 20px 10px; font-size: 20px; font-weight: 660; text-align: center;
        }
        .modal-body {
            padding: 0 20px; max-height: 70vh; overflow-y: auto;
        }
        .modal-footer {
            padding: 10px 20px 20px; border-top: 1px solid rgba(255, 255, 255, 0.15);
        }
        #exportVcfInModal {
            width: 100%; padding: 15px; background-color: var(--accent-color); 
            color: white; border: none; border-radius: 30px; 
            cursor: pointer; font-size: 17px; font-weight: 660;
            transition: all 0.2s ease-out; box-shadow: 0 4px 15px rgba(10, 132, 255, 0.5); 
        }
        #exportVcfInModal:active { transform: scale(0.98); background-color: #0077e6; }
        
        /* æ¨¡æ€çª—å£ Tab æ ·å¼ */
        .segmented-control {
            display: flex; margin: 10px 0 20px; background-color: var(--segment-bg);
            border-radius: 12px; padding: 4px; user-select: none; position: relative;
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.15);
        }
        .segmented-item { flex-grow: 1; padding: 10px 5px; text-align: center; font-size: 15px; font-weight: 500; cursor: pointer; color: rgba(255, 255, 255, 0.8); transition: color 0.2s; position: relative; z-index: 2; }
        .segment-active-bg { position: absolute; top: 4px; left: 4px; height: calc(100% - 8px); width: 50%; background-color: var(--accent-color); border-radius: 9px; transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1); z-index: 1; box-shadow: 0 0 10px rgba(10, 132, 255, 0.8), inset 0 0 5px rgba(255, 255, 255, 0.4); }
        .segmented-item.active { color: white; font-weight: 660; }
        .tab-panel { display: none; padding-bottom: 10px; }
        .tab-panel.active { display: block; }
        .tab-panel ol { padding-left: 20px; font-size: 15px; line-height: 1.6; color: rgba(255, 255, 255, 0.8); }
        .tab-panel h4 { font-size: 16px; font-weight: 600; margin-top: 0; margin-bottom: 8px; color: var(--text-color); }
        .tab-panel li { margin-bottom: 10px; }

        /* è§†é¢‘æ ·å¼ */
        .video-container { position: relative; width: 100%; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; margin: 15px 0; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5); }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .video-description { font-size: 15px; line-height: 1.6; color: rgba(255, 255, 255, 0.9); padding: 10px 0 20px; }
        #closeVideoModalBtn { width: 100%; padding: 15px; background-color: #5856d6; color: white; border: none; border-radius: 30px; cursor: pointer; font-size: 17px; font-weight: 660; transition: all 0.2s ease-out; box-shadow: 0 4px 15px rgba(88, 86, 214, 0.5); }
        #closeVideoModalBtn:active { transform: scale(0.98); background-color: #4442a8;}

        /* è‡ªé€‚åº”ä¼˜åŒ– (ä¿æŒä¸€è‡´) */
        @media (max-width: 480px) {
            .vcard-container { width: 100%; max-width: none; border-radius: 0; border-left: none; border-right: none; box-shadow: none; margin: 0; padding-top: 40px; }
            .info-group { border-radius: 12px; margin: 15px; }
            .modal-content { width: 100%; height: 100%; max-width: none; border-radius: 0; box-shadow: none; border: none; }
            .segmented-control { margin-left: 10px; margin-right: 10px; }
            .modal-body { padding: 0 10px; max-height: calc(100vh - 150px); }
            .video-container { margin: 10px 0; }
        }

    </style>
</head>
<body>

<div class="vcard-container">
    <div class="header">
        <div class="profile-icon">
            <img id="profile-image" src="" alt="Profile Picture">
        </div>
        <div class="full-name" id="name-display"></div>
        <p class="contact-title" id="title-display"></p>
    </div>

    <div class="info-group">
        <ul class="info-list">
            <li class="info-item">
                <div class="info-content-wrap">
                    <span class="label">ç”µè¯</span>
                    <span class="value"><a id="tel-link" href="#"></a></span>
                </div>
            </li>
            <li class="info-item">
                <div class="info-content-wrap">
                    <span class="label">é‚®ç®±</span>
                    <span class="value"><a id="email-link" href="#"></a></span>
                </div>
            </li>
        </ul>
    </div>

    <div class="info-group">
        <ul class="info-list">
            <li class="info-item">
                <div class="info-content-wrap">
                    <span class="label">å…¬å¸</span>
                    <span class="value" id="org-display"></span>
                </div>
            </li>
            <li class="info-item">
                <div class="info-content-wrap">
                    <span class="label">åœ°å€</span>
                    <span class="value" id="address-display"></span>
                </div>
            </li>
            <li class="info-item">
                <div class="info-content-wrap">
                    <span class="label">ç½‘ç«™</span>
                    <span class="value"><a id="url-link" href="#" target="_blank" rel="noopener noreferrer"></a></span>
                </div>
            </li>
        </ul>
    </div>
    
    <div class="action-container">
        <button id="showModalBtn">å¦‚ä½•å¿«é€Ÿè”ç³»æˆ‘ä»¬</button>
        <button id="showVideoModalBtn">â¯ï¸ æŸ¥çœ‹äº§å“ä½¿ç”¨è§†é¢‘</button>
    </div>
</div>


<div class="modal-overlay" id="exportModal">
    <div class="modal-content">
        <div class="modal-header">
            å¦‚ä½•ä¿å­˜è”ç³»äººï¼Ÿ
        </div>
        
        <div class="modal-body">
            <div class="segmented-control">
                <div class="segment-active-bg" id="segment-bg"></div>
                <div class="segmented-item active" data-tab="ios" id="ios-tab">
                    <span style="color: var(--accent-color);">ğŸ</span> iOS æ“ä½œ
                </div>
                <div class="segmented-item" data-tab="android" id="android-tab">
                    <span style="color: #3DDC84;">ğŸŸ¢</span> Android æ“ä½œ
                </div>
            </div>

            <div id="ios-panel" class="tab-panel active">
                <h4>iOS / è‹¹æœæ“ä½œç¤ºä¾‹ (æ¨è)</h4>
                <ol>
                    <li>ç‚¹å‡»åº•éƒ¨çš„ **â€œç«‹å³å¯¼å‡ºâ€** æŒ‰é’®ï¼Œä¸‹è½½ **.vcf** æ–‡ä»¶ã€‚</li>
                    <li>åœ¨ **Safari æµè§ˆå™¨** ä¸­ï¼Œç‚¹å‡»ä¸‹è½½å®Œæˆçš„æ–‡ä»¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è¯†åˆ«ä¸ºè”ç³»äººã€‚</li>
                    <li>é€‰æ‹© **â€œåˆ›å»ºæ–°è”ç³»äººâ€** æˆ– **â€œæ·»åŠ åˆ°ç°æœ‰è”ç³»äººâ€**ã€‚</li>
                    <li>å¦‚æœç³»ç»Ÿæœªè‡ªåŠ¨æ‰“å¼€ï¼Œè¯·åœ¨ **â€œæ–‡ä»¶ Appâ€** æˆ– **â€œä¸‹è½½â€** åˆ—è¡¨ä¸­æ‰¾åˆ° **.vcf** æ–‡ä»¶ï¼Œç‚¹å‡»æ‰“å¼€å³å¯ã€‚</li>
                </ol>
            </div>
            
            <div id="android-panel" class="tab-panel">
                <h4>Android / è°·æ­Œé€šè®¯å½•æ“ä½œç¤ºä¾‹</h4>
                <ol>
                    <li>ç‚¹å‡»åº•éƒ¨çš„ **â€œç«‹å³å¯¼å‡ºâ€** æŒ‰é’®ï¼Œä¸‹è½½ **.vcf** æ–‡ä»¶åˆ°æ‰‹æœºå­˜å‚¨ã€‚</li>
                    <li>æ‰“å¼€æ‰‹æœºçš„ **é€šè®¯å½• App** (æˆ– Google Contacts)ã€‚</li>
                    <li>åœ¨ App èœå• (**...** æˆ–è®¾ç½®) ä¸­æ‰¾åˆ° **â€œå¯¼å…¥/å¯¼å‡ºâ€** æˆ– **â€œå¯¼å…¥è”ç³»äººâ€** é€‰é¡¹ã€‚</li>
                    <li>é€‰æ‹© **â€œä»å­˜å‚¨è®¾å¤‡å¯¼å…¥â€**ï¼Œæ‰¾åˆ°å¹¶é€‰æ‹©åˆšåˆšä¸‹è½½çš„ **.vcf** æ–‡ä»¶ã€‚</li>
                    <li>ç¡®è®¤å¯¼å…¥åˆ°æŒ‡å®šè´¦æˆ·/æœ¬åœ°ï¼Œè”ç³»äººä¿¡æ¯å³å¯æˆåŠŸä¿å­˜ã€‚</li>
                </ol>
            </div>
            
            <p style="text-align: center; margin-top: 25px; font-size: 14px; color: rgba(255, 255, 255, 0.5);">
                * å¤§å¤šæ•°ç°ä»£æ‰‹æœº App ä¼šè‡ªåŠ¨æç¤ºå¯¼å…¥ï¼Œè¯·ä»¥æ‚¨è®¾å¤‡ä¸Šçš„æç¤ºä¸ºå‡†ã€‚
            </p>
        </div>

        <div class="modal-footer">
            <button id="exportVcfInModal">ç«‹å³å¯¼å‡ºå¹¶ä¸‹è½½è”ç³»äºº</button>
        </div>
    </div>
</div>


<div class="modal-overlay" id="videoModal">
    <div class="modal-content">
        <div class="modal-header">
            åç‰‡æ•ˆæœè§†é¢‘æ¼”ç¤º
        </div>
        
        <div class="modal-body" style="padding: 20px;">
            <div class="video-container">
                <iframe 
                    id="introVideo" 
                    src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                    title="åç‰‡ä»‹ç»è§†é¢‘" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>

            <div class="video-description">
                <p>è¿™æ®µè§†é¢‘æ¼”ç¤ºäº†æœ¬ Liquid Glass é£æ ¼åç‰‡åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„è‡ªé€‚åº”æ•ˆæœï¼Œä»¥åŠå…¶ç‹¬ç‰¹çš„åŠ¨æ€èƒŒæ™¯ã€ç»ç’ƒæ¨¡ç³Šå’Œ VCF å¯¼å‡ºåŠŸèƒ½ã€‚</p>
                <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å…³é—­çª—å£ã€‚</p>
            </div>
        </div>

        <div class="modal-footer">
            <button id="closeVideoModalBtn">å…³é—­è§†é¢‘æ¼”ç¤º</button>
        </div>
    </div>
</div>


<script>
    // ----------------------------------------
    // æ•°æ®ä¸­å¿ƒï¼šåªéœ€ä¿®æ”¹æ­¤å¯¹è±¡
    // ----------------------------------------
    const contactData = {
        name: "æ±å¾‹ç§‘æŠ€", 
        firstName: "ç§‘æŠ€", 
        lastName: "æ±å¾‹", 
        organization: "æ·±åœ³æ±å¾‹ç§‘æŠ€æœ‰é™è´£ä»»å…¬å¸", 
        title: "ç›¸ä¿¡ç§‘æŠ€çš„åŠ›é‡èƒ½å¤Ÿæå‡æ¯ä¸€ä½æ°´ä¸Šè¿åŠ¨å‚ä¸è€…çš„ä½“éªŒã€‚", 
        phone: "+8613998765432", 
        email: "work@xilv.com", 
        addressVCF: ";;ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ æ±Ÿé«˜ç§‘;;;ä¸­å›½", 
        addressDisplay: "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ æ±Ÿé«˜ç§‘", 
        url: "https://www.xilv.com", 
        imageURL: "https://jony.wang/img/xilvtx.PNG"
    };
    // ----------------------------------------

    function generateVCardText(data) {
        return `BEGIN:VCARD\nVERSION:3.0\nN:${data.lastName};${data.firstName};;;\nFN:${data.name}\nORG:${data.organization}\nTITLE:${data.title}\nTEL;TYPE=WORK,VOICE:${data.phone}\nEMAIL;TYPE=PREF,INTERNET:${data.email}\nADR;TYPE=WORK:${data.addressVCF}\nURL:${data.url}\nEND:VCARD`;
    }

    // --- å¯¼å‡ºæ¨¡æ€çª—å£æ§åˆ¶ ---
    const exportModal = document.getElementById('exportModal');
    function showExportModal() { exportModal.style.display = 'flex'; }
    function closeExportModal() { exportModal.style.display = 'none'; }
    exportModal.addEventListener('click', (e) => { if (e.target === exportModal) { closeExportModal(); } });

    function exportVCF() {
        const vcardText = generateVCardText(contactData);
        const blob = new Blob([vcardText], { type: 'text/vcard;charset=utf-8' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `${contactData.name}.vcf`; 
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(a.href);
        closeExportModal(); 
    }
    
    // --- è§†é¢‘æ¨¡æ€çª—å£æ§åˆ¶ ---
    const videoModal = document.getElementById('videoModal');
    const introVideo = document.getElementById('introVideo');

    function showVideoModal() { 
        videoModal.style.display = 'flex'; 
        // ç¡®ä¿è§†é¢‘åœ¨æ‰“å¼€æ—¶æ’­æ”¾
        introVideo.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
    }

    function closeVideoModal() { 
        videoModal.style.display = 'none'; 
        // ç¡®ä¿è§†é¢‘åœ¨å…³é—­æ—¶æš‚åœ
        introVideo.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
    }
    
    videoModal.addEventListener('click', (e) => { 
        if (e.target === videoModal) { closeVideoModal(); } 
    });


    // Tab åˆ‡æ¢é€»è¾‘
    const segmentedItems = document.querySelectorAll('.segmented-item');
    const activeBg = document.getElementById('segment-bg');

    function switchTab(targetTab) {
        const isIOS = targetTab === 'ios';
        activeBg.style.transform = isIOS ? 'translateX(0%)' : 'translateX(100%)';
        segmentedItems.forEach(item => {
            const tabId = item.getAttribute('data-tab');
            const panel = document.getElementById(tabId + '-panel');
            if (tabId === targetTab) {
                item.classList.add('active');
                panel.classList.add('active');
            } else {
                item.classList.remove('active');
                panel.classList.remove('active');
            }
        });
    }

    // äº‹ä»¶ç»‘å®š
    document.getElementById('showModalBtn').addEventListener('click', showExportModal);
    document.getElementById('exportVcfInModal').addEventListener('click', exportVCF);
    document.getElementById('showVideoModalBtn').addEventListener('click', showVideoModal);
    document.getElementById('closeVideoModalBtn').addEventListener('click', closeVideoModal);

    segmentedItems.forEach(item => {
        item.addEventListener('click', () => {
            const targetTab = item.getAttribute('data-tab');
            switchTab(targetTab);
        });
    });

    // ç»Ÿä¸€æ•°æ®ç»‘å®šå‡½æ•°
    function updateDisplay(data) {
        // 1. å¤´åƒ
        document.getElementById('profile-image').src = data.imageURL; 

        // 2. å§“åå’ŒèŒä½
        document.getElementById('name-display').textContent = data.name;
        document.getElementById('title-display').textContent = `${data.title} @ ${data.organization}`;
        
        // 3. ç”µè¯
        document.getElementById('tel-link').href = `tel:${data.phone}`;
        document.getElementById('tel-link').textContent = data.phone.replace(/(\+86)(\d{3})(\d{4})(\d{4})/, '$1 $2 $3 $4'); 
        
        // 4. é‚®ç®±
        document.getElementById('email-link').href = `mailto:${data.email}`;
        document.getElementById('email-link').textContent = data.email;
        
        // 5. å…¬å¸/åœ°å€/ç½‘ç«™
        document.getElementById('org-display').textContent = data.organization;
        document.getElementById('address-display').textContent = data.addressDisplay;
        document.getElementById('url-link').href = data.url;
        document.getElementById('url-link').textContent = data.url.replace(/https?:\/\//, '').replace(/\/$/, '');
    }

    // é¡µé¢åˆå§‹åŒ–
    updateDisplay(contactData);
    switchTab('ios');

</script>

</body>
</html>
